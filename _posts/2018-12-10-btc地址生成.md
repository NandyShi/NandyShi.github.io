---
layout:     post
title:      btc 钱包私钥、公钥和地址的生成
subtitle:   address
date:       2018-12-10
author:     NandyShi
header-img: 
catalog: true
tags:
    -btc -address -private key
---

## 前言

一个 Bitcoin 钱包包含了一系列的密钥对，每个密钥对都是由一对公钥(public key)和私钥(private key)组成。私钥(k)通常是随机选出的一串数字串，之后我们就可以通过椭圆曲线密码学(ECC)算法来产生一个公钥(K)，然后再通过单向的 Hash 算法来生成 Bitcoin 地址。
如下图所示，描述了生成过程及主要的算法，以及整个过程的每一步都是不可逆的。

![](https://i.loli.net/2018/12/10/5c0dd386adc29.jpg)

## 如何生成私钥（private key）

>关键词：私钥

本质上私钥就是一串随机选出的 256 个 bit 的 01 数字（32 字节 * 8 = 256 bits），但是这串数字却控制着你的比特币账号的所有权，因此这串数字相当重要，要具有足够的随机性，一般采用密码学安全的伪随机数生成器(CSPNG)，并且需要有一个来自具有足够熵值的源的种子(seed)。

>为什么会选择 32 个字节？因为 Bitcoin 使用的是 ECDSA 算法，并且使用的是 secp256k1 曲线。

譬如：对于 Java 实现我们可以使用 java.security.SecureRandom 来生成随机数，如下为 SecureRandom 的默认构造方法，没有设置 seed，使用缺省的（支持 RNG 算法的）provider 来生成：
```
public SecureRandom() {
    /*
     * This call to our superclass constructor will result in a call
     * to our own {@code setSeed} method, which will return
     * immediately when it is passed zero.
     */
    super(0);
    getDefaultPRNG(false, null);
}```
